### SERVER/USERNAME SETTINGS
source ~/.mutt/muttrc-server



### SETTINGS
alternative_order text/enriched text/plain text/html	# prefer tetx to html
set alias_file=~/.mutt/aliases							# alias file
source ~/.mutt/aliases									# source it
set beep=no												# SILENCIUM
set certificate_file=~/.mutt/certificates				# my trusted ones
set confirmappend=no									# do NOT ask, just append to another mailbox
set delete												# again, do NOT ask, just delete when leaving a mailbox
set edit_headers										# full control when creating a message
set editor=vim											# need i say more?
set fast_reply											# do not ask about to: and subject:
set header_cache="~/.mutt/cache/headers"				# speed improvements
set include													# add original to reply
set mark_old=no											# do NOT make new unread messages with 'O'
set message_cachedir="~/.mutt/cache/bodies"				# more speed improvements
set sort = 'threads'									# show threads
set sort_aux = 'last-date-received'						# sort threads by last message date
set query_command="/usr/local/bin/lbdbq '%s'"			# on os x, get list of contacts



### HOOKS
folder-hook . "set record=^"									# send message -> current folder
folder-hook news://news.gmane.org.* "set record=+gmane"			# send message -> gmane
save-hook '~f .*' +Archive                                       # archive message
save-hook '~h gmane' +gmane										# match gmane -> gmane



### LOOK AND FEEL
ignore *														# ignore all header lines
unignore  Date From To CC Subject X-Mailer X-Bogosity			# but show these
hdr_order Date From To CC Subject X-Bogosity					# in this order
set date_format="!%d%b %H:%M"									# shorten date
set folder_format="%2C %t %8s %d %N %f"							# more info
set index_format="%4C %4c%Z %D %-25.25F %?M?(%M) &?%s"			# more info
set pager_context=1												# show 1 common line when paging
set pager_index_lines=5											# show some index lines when in pager
set status_format=" @%h:%f <%?n?N%n/?%?M?%M/?%m%?d?/D%d? %?L?%L/?%l>   %?b?NewBox: %b  ?%?F?Flag: %F  ?%?t?Tag: %t  ?%?V?Limit: %V?%> %r(%P)" # nicefy
set status_on_top												# show status where it belongs



### GMANE
set group_index_format="%5C %M%N %6s %-45.45f %d"				# more info
set catchup_newsgroup=yes										# quit -> mark all as read
set followup_to_poster=yes										# include submitter
set news_server=news.gmane.org									# use this
set post_moderated=yes											# try posting anyway



### GPG
set pgp_good_sign="^gpg: Good signature from"
set pgp_sign_as=0x3AFB7CCD
#set crypt_autoencrypt
set crypt_autosign
set crypt_replyencrypt
set crypt_replysign
set crypt_replysignencrypted
set crypt_verify_sig
set pgp_decode_command="gpg --status-fd=2 %?p?--passphrase-fd 0? --no-verbose --quiet --batch --output - %f"
set pgp_verify_command="gpg --status-fd=2 --no-verbose --quiet --batch --output - --verify %s %f"
set pgp_decrypt_command="gpg --status-fd=2 %?p?--passphrase-fd 0? --no-verbose --quiet --batch --output - %f"
set pgp_sign_command="gpg --no-verbose --batch --quiet --output - %?p?--passphrase-fd 0? --armor --detach-sign --textmode %?a?-u %a? %f"
set pgp_clearsign_command="gpg --no-verbose --batch --quiet --output - %?p?--passphrase-fd 0? --armor --textmode --clearsign %?a?-u %a? %f"
set pgp_encrypt_only_command="pgpewrap gpg --batch --quiet --no-verbose --output - --encrypt --textmode --armor --always-trust --encrypt-to 0x3AFB7CCD -- -r %r -- %f"
set pgp_encrypt_sign_command="pgpewrap gpg %?p?--passphrase-fd 0? --batch --quiet --no-verbose --textmode --output - --encrypt --sign %?a?-u %a? --armor --always-trust --encrypt-to 0x3AFB7CCD -- -r %r -- %f"
set pgp_import_command="gpg --no-verbose --import %f"
set pgp_export_command="gpg --no-verbose --export --armor %r"
set pgp_verify_key_command="gpg --no-verbose --batch --fingerprint --check-sigs %r"
set pgp_list_pubring_command="gpg --no-verbose --batch --quiet --with-colons --list-keys %r"
set pgp_list_secring_command="gpg --no-verbose --batch --quiet --with-colons --list-secret-keys %r"



### HTML MESSAGES
auto_view text/html application/x_pgp_message
set implicit_autoview
set mailcap_path="~/.mailcap"



### KEY BINDINGS
bind pager h display-toggle-weed
bind pager [ half-up
bind pager ] half-down



### MACROS
#macro pager                 \cb         |urlview\n "call urlview to extract URLs out of a message"
macro index,pager           A           "<save-message>=Archive<enter>" "Archive message"
macro index,pager           Ga          "<change-folder>=Archive<enter>" "Go to Archive"
macro index,pager           Gi          "<change-folder>=INBOX<enter>" "Go to INBOX"
macro index,pager           Gs          "<change-folder>=Sent<enter>" "Go to Sent"
macro index,pager           Gt          "<change-folder>=Trash<enter>" "Go to Trash"
macro index,pager           d           "<save-message>=Trash<enter>" "trash message"
macro index,pager           <Esc>\cD    "<delete-message>" "delete the current entry"
macro index,pager           S           "<save-message>=Spam<enter>" "Spam"



### COLORS
color error      red             default
color indicator  brightwhite     default
color markers    yellow          default
color message    red             default
color normal     default         default
color search     red             default
color status     green           default
color tilde      red             default
color tree       cyan            default
color index      yellow          default  ~F
color index      green           default  ~N
color index      cyan            default  ~T
color index      red             default  ~D

color hdrdefault default         default
color header     green           default "^x-bogosity: ham"
color header     red             default "^x-bogosity: spam"
color header     magenta         default "^x-bogosity: unsure"
color header     yellow          default "^date:"
color header     brightyellow    default "^from:"
color header     brightyellow    default "^subject:"
color body       green           default "mailto:[-a-z_0-9.]+@[-a-z_0-9.]+"
color body       yellow          default "(finger|ftp|hg|http[s]*|news|tel)://[^ ]*"
color body       green           default "gpg: Good signature from.*"
color body       red             default "gpg: Bad signature from.*"
color quoted     cyan            default
color quoted1    magenta         default
color quoted2    brightcyan      default
color quoted3    brightmagenta   default
color bold       yellow          default
color underline  yellow          default
color attachment yellow          default
color signature  red             default

color body       yellow          default "(^| )\\*[-a-z0-9*]+\\*[,.?]?( |$)"
color body       yellow          default "(^| )_[-a-z0-9_]+_[,.?]?( |$)"
