# settings
fpath=(~/.zsh/osx-zsh-completions/ $fpath)
autoload -Uz compinit
compinit -d ~/.zcompdump
autoload -U colors
colors

HISTFILE=~/.histfile
HISTSIZE=32676
SAVEHIST=32676
setopt extendedhistory
setopt histignorealldups
setopt histignorespace
setopt histnostore
setopt histreduceblanks
setopt histsavenodups
setopt histverify
setopt incappendhistory
setopt sharehistory

setopt autopushd
setopt extendedglob
setopt pushdignoredups

setopt brace_ccl
setopt correct_all
setopt nobgnice
setopt notify
setopt prompt_subst
unsetopt beep

bindkey -v
bindkey '^r' history-incremental-pattern-search-backward
bindkey '^f' history-incremental-pattern-search-forward
PERIOD=60

bindkey -M viins "$terminfo[cuu1]" up-line-or-history
bindkey -M viins "$terminfo[kcuu1]" up-line-or-history
bindkey -M viins "$terminfo[kcud1]" down-line-or-history

zstyle :compinstall filename '~/.zshrc'
zstyle ':completion:*' group-name ''
zstyle ':completion:*' menu select
zstyle ':completion:*' special-dirs true
zstyle ':completion:*' format "%U%F{green}[%d]%u%b%f"
zstyle ':completion:*:descriptions' format $'%{\e[0;31m%}completing %B%d%b%{\e[0m%}'
zstyle ':completion:*:messages' format "%B%U%F{red}%d%u%b%f"
zstyle ':completion:*:warnings' format "%F{red}[%d]%f"

alias dud='du -hxd1 | sort -h'
alias dvorak='setxkbmap -model pc104 -layout us,us,de -variant dvp,,nodeadkeys -option lv3:ralt_switch'
hash krenew 2> /dev/null && alias ktmux='krenew -biL -- /usr/bin/zsh -c "tmux new -d && while tmux ls &>/dev/null; do sleep 60; done"; sleep 1; tmux a'
alias ll='ls -l'
ls --color &> /dev/null && alias ls='ls --color'
hash apg &> /dev/null && alias pw-gen='apg -a1 -n10 -m 20'
alias scpr='rsync --partial --progress --rsh=ssh'
alias vi='vim'

[ -f ~/.org/index.wiki ] && alias org='wiki ~/.org'
[ -f ~/papers/index.wiki ] && alias papers='wiki ~/papers'

alias -s doc=xdg-open
alias -s pdf=xdg-open
alias -s gz='gunzip -c'

export CLICOLOR="yes"
export EDITOR="vim"
export GPG_TTY=$(tty) # announce tty to pinentry
export LESS_TERMCAP_mb=$'\E[01;31m'    # mode blink
export LESS_TERMCAP_md=$'\E[01;31m'    # mode bold
export LESS_TERMCAP_me=$'\E[0m'        # mode end
export LESS_TERMCAP_se=$'\E[0m'        # stand-out end
export LESS_TERMCAP_so=$'\E[01;44;33m' # stand-out
export LESS_TERMCAP_ue=$'\E[0m'        # underline end
export LESS_TERMCAP_us=$'\E[01;32m'    # underline start
export LSCOLORS=cxfxexdxCxegedabagacad # directory: green, sockets: blue, executable: bold green
export LS_COLORS='di=32'
export MAKEFLAGS="-j`sysctl -n hw.ncpu 2> /dev/null || grep -c '^processor' /proc/cpuinfo`"
[[ ! $PATH =~ sbin ]] && export PATH="/usr/local/sbin:/usr/sbin:/sbin:$PATH"
export XLIB_SKIP_ARGB_VISUALS=1

ulimit -c unlimited
umask 077
